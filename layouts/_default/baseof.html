<!doctype html>
<html lang="{{ .Site.LanguageCode | default "en" }}">
  {{ partial "head/head.html" . }}
  {{ if eq .Kind "home" -}}
    {{ .Scratch.Set "class" "home" -}}
  {{ else if eq .Kind "404" -}}
    {{ .Scratch.Set "class" "error404" -}}
  {{ else if eq .Kind "page" -}}
    {{ .Scratch.Set "class" .Type -}}
    {{ .Scratch.Add "class" " single" -}}
  {{ else -}}
    {{ .Scratch.Set "class" .Type -}}
    {{ .Scratch.Add "class" " list" -}}
  {{ end -}}
  <body class="{{ .Scratch.Get "class" }}">
    {{ partial "header/header.html" . }}
    <div class="wrap container-{{ if .Site.Params.options.fullWidth }}fluid{{ else }}xxl{{ end }}" role="document">      <div class="content">
        {{ block "main" . }}{{ end }}
      </div>
    </div>
    {{ block "sidebar-prefooter" . }}{{ end }}
    {{ block "sidebar-footer" . }}{{ end }}
    {{ partial "footer/footer.html" . }}
    {{ partial "footer/script-footer.html" . }}



        
    <button id="sui-widget-btn" class=""></button>
    <button id="sui-webchat-btn"></button>
    <iframe id="sui-webchat" src=https://chat.seasalt.ai/chat/9e4cef8823b94d019b954db6f4328a93></iframe>
    <button id="sui-Line-btn" class="chat-button"></button>
    <button id="sui-Instagram-btn" class="chat-button"></button>
    <button id="sui-Messenger-btn" class="chat-button"></button>
    <button id="sui-WhatsApp-btn" class="chat-button"></button>
    <button id="sui-Voice-btn" class="chat-button"></button>

    <div id="sui-widget-tooltip">
        <div id="sui-widget-tooltip-msg">Any questions? We follow up with every message.</div>
        <div id="sui-widget-tooltip-close"></div>
    </div>

    <noscript>
      Powered by 
      <a href="https://chat.seasalt.ai">SeaChat</a> from
      <a href="https://seasalt.ai" target="_blank">Seasalt.ai</a>.
    </noscript>
    <style>
      #sui-Voice-btn {
        position: fixed;
        display: block;
        width: 56px;
        height: 56px;
        right: 16px;
        border-radius: 50%;
        box-shadow: 1px 2px 8px 0px #000;
        border: none;
        z-index: 9997;
        bottom: 358px;
        background: 50%/24px no-repeat
          url(https://seasalt-cdn.s3.us-west-2.amazonaws.com/f2e/icon-voice.svg);
        background-size: cover;
        cursor: pointer;
      }
      #sui-Instagram-btn {
        position: fixed;
        display: block;
        width: 56px;
        height: 56px;
        right: 16px;
        border-radius: 50%;
        box-shadow: 1px 2px 8px 0px #000;
        border: none;
        z-index: 9997;
        bottom: 290px;
        background: 50%/24px no-repeat
          url(https://seasalt-cdn.s3.us-west-2.amazonaws.com/f2e/icon-instagram.svg);
        background-size: cover;
        cursor: pointer;
      }
      #sui-Messenger-btn {
        position: fixed;
        display: block;
        width: 56px;
        height: 56px;
        right: 16px;
        border-radius: 50%;
        box-shadow: 1px 2px 8px 0px #000;
        border: none;
        z-index: 9997;
        bottom: 154px;
        background: 50%/24px no-repeat
          url(https://seasalt-cdn.s3.us-west-2.amazonaws.com/f2e/icon-facebook.svg);
        background-size: cover;
        cursor: pointer;
      }
      #sui-Line-btn {
        position: fixed;
        display: block;
        width: 56px;
        height: 56px;
        right: 16px;
        border-radius: 50%;
        box-shadow: 1px 2px 8px 0px #000;
        border: none;
        z-index: 9997;
        bottom: 86px;
        background: 50%/24px no-repeat
          url(https://seasalt-cdn.s3.us-west-2.amazonaws.com/f2e/icon-line.svg);
        background-size: cover;
        cursor: pointer;
      }
      #sui-WhatsApp-btn {
        position: fixed;
        display: block;
        width: 56px;
        height: 56px;
        right: 16px;
        border-radius: 50%;
        box-shadow: 1px 2px 8px 0px #000;
        border: none;
        z-index: 9997;
        bottom: 222px;
        background: 50%/24px no-repeat
          url(https://seasalt-cdn.s3.us-west-2.amazonaws.com/f2e/icon-whatsapp.svg);
        background-size: cover;
        cursor: pointer;
      }
      #sui-webchat-btn {
        position: fixed;
        display: block;
        width: 56px;
        height: 56px;
        bottom: 16px;
        right: 16px;
        padding: 0;
        font-size: 0;
        color: transparent;
        background: 50%/24px no-repeat
          url(https://chat.seasalt.ai/api/v1/conversations/async/config/9e4cef8823b94d019b954db6f4328a93/webchat_widget_icon?1749761608155) #19b9c3;
        background-size: cover;
        border: none;
        border-radius: 50%;
        box-shadow: 1px 2px 8px 0px #000;
        z-index: 9999;
        cursor: pointer;
      }
      #sui-webchat-btn.close{
        background: 50%/24px no-repeat
          url(https://seasalt-cdn.s3.us-west-2.amazonaws.com/f2e/icon-close.svg);
        background-size: cover;
        display: block;
      }
      #sui-widget-btn {
        position: fixed;
        display: none;
        width: 56px;
        height: 56px;
        bottom: 20px;
        right: 16px;
        background: 50%/24px no-repeat
          url(https://seasalt-cdn.s3.us-west-2.amazonaws.com/f2e/icon-widget.svg);
        background-size: cover;
        z-index: 9997;
        border-radius: 50%;
        box-shadow: 1px 2px 8px 0px #000;
        border: none;
        cursor: pointer;
      }
      #sui-widget-btn.close{
        background: 50%/24px no-repeat
          url(https://seasalt-cdn.s3.us-west-2.amazonaws.com/f2e/icon-close.svg);
        background-size: cover;
          display: block;
      }
      #sui-webchat {
        position: fixed;
        display: none;
        width: 30%;
        min-width: 280px;
        height: 500px;
        bottom: 80px;
        right: 80px;
        margin-top: 24px;
        border: none;
        border-radius: 10px;
        box-shadow: 0 0 6px 0 rgba(0, 0, 0, 0.9);
        z-index: 9998;
      }
      #sui-call-form{
        position: fixed;
        display: none;
        bottom: 358px;
        right: 80px;
        margin-top: 24px;
        border: none;
        border-radius: 10px;
        box-shadow: 0 0 6px 0 rgba(0, 0, 0, 0.9);
        background:#fff;
        z-index: 9998;
      }
      @media only screen and (max-width: 460px) {
        #sui-widget-btn {
          display: block;
        }
        #sui-webchat {     
          right: 50%;  
          transform: translate(50%, -12%);
          bottom: 20px;
        }
        #sui-webchat-btn {
            display: none;
            bottom: 88px;
        }
        #sui-webchat-btn.show {
            display: block;
        }
        #sui-webchat-btn.show-iframe {
          display: block;
          bottom: 20px;
          z-index: 9998;
        }
        #sui-call-form {     
          right: 50%;  
          transform: translate(50%, -12%);
          bottom: 20px;
        }
        #sui-Line-btn {
            display: none;
            bottom:156px;
        }
        #sui-Line-btn.show {
            display: block;
        }
        #sui-Line-btn.show.show-iframe {
            display: none;
            
        }
        #sui-WhatsApp-btn {
            display: none;
            bottom:292px;
        }
        #sui-WhatsApp-btn.show {
            display: block;
          
        }
        #sui-WhatsApp-btn.show.show-iframe {
            display: none;
        }
        #sui-Messenger-btn {
            display: none;
            bottom:224px;
        }
        #sui-Messenger-btn.show {
            display: block;
        }
        #sui-Messenger-btn.show.show-iframe {
            display: none;
        }
        #sui-Instagram-btn {
            display: none;
            bottom:360px;
        }
        #sui-Instagram-btn.show {
            display: block;
        }
        #sui-Instagram-btn.show.show-iframe {
            display: none;
        }
        #sui-Voice-btn {
            display: none;
            bottom:428px;
        }
        #sui-Voice-btn.show {
            display: block;
        }
        #sui-Voice-btn.show.show-iframe {
            display: none;
        }
        #sui-Voice-btn.show.show-call-form{
            bottom: 20px;
            z-index: 9998;
        }
      }
      
        #sui-widget-tooltip {
          position: fixed;
          bottom: 16px;
          right: 80px;
          background-color: #FFFFFF;
          color: #000000;
          font-size: 14px;
          line-height: 22px;
          border-radius: 16px;
          padding: 12px 16px;
          box-shadow: 0 2px 10px 0 rgba(0,0,0,0.2);
          max-width: 200px;
          z-index: 3;
        }
        #sui-widget-tooltip-msg {
          white-space: pre-wrap;
        }
        #sui-widget-tooltip-close {
          width: 20px;
          height: 20px;
          background-color: #656565;
          border-radius: 30px;
          display: flex;
          align-items: center;
          justify-content: center;
          position: absolute;
          top: -8px;
          left: -8px;      
          cursor: pointer;
          z-index: 3;
        }
        #sui-widget-tooltip-close::after {
          content: '×';
          color: white;
          font-size: 18px;
          font-weight: bold;
          text-align: center;
          line-height: 18px;
        }
        @media only screen and (max-width: 460px) {
          #sui-widget-tooltip {
            bottom: 20px;
          }
        }
        
    </style>
    <script>
      var configId = "9e4cef8823b94d019b954db6f4328a93";
      var currentConversationId = null;
      var showWebChat = false;
      
      window.addEventListener("message", function (event) { 
        if (event.data?.type === "SEACHAT_CONVERSATION_ID") {
          currentConversationId = event.data.conversation_id;
        }

        if (event.data?.type === "CLOSE_IFRAME_AFTER_SURVEY") {
          setTimeout(() => {
            resetIframeToChat();
          }, 300);
        }
      });
      function tryRedirectToSurvey() {
        var iframe = document.getElementById("sui-webchat");
        if (iframe) {
          if (!currentConversationId) {
            return;
          }

          var surveyUrl = "https://chat.seasalt.ai/chat/survey/csat?id="+ configId + "&conversation_id=" + currentConversationId;
          iframe.src = surveyUrl;
          iframe.dataset.fromSurvey = "true";
        }
      }
      
      function resetIframeToChat() {
        var iframe = document.getElementById("sui-webchat");
        var btn = document.getElementById("sui-webchat-btn");
        iframe.style.display = "none";
        iframe.src = "https://chat.seasalt.ai/chat/9e4cef8823b94d019b954db6f4328a93";
        btn.classList.remove("close");
        showWebChat = false;
        updateButtonClasses();
      }
        
      function initSeaChat() {
        showWebChat = false;
        var isMobile = window.innerWidth <= 460;
        var callFormUrl = "";
        function calc() {
          var buttons = document.querySelectorAll('.chat-button');
          buttons.forEach(function(button, index) {
            var baseOffset;
            if (isMobile) {
              baseOffset = 88;
            } else{
              baseOffset = 20;
            }
            var increment = 68;
            button.style.bottom = baseOffset + (index + 1) * increment + 'px';
          }); 
        }
        calc();
        handleSingleButtonDisplay();
        function updateButtonClasses() {
          document.querySelectorAll('.chat-button').forEach(function(button) {
            button.className = 'chat-button';
            if (showWebChat) {
              button.classList.add('show-iframe');
            } else if (isMobile) {
                button.classList.add('show');
            }
          });
          calc();
          var button = document.querySelector('#sui-webchat-btn');
          button.className = '';
            if (showWebChat) {
              button.classList.add('show-iframe');
              button.classList.add('close');
            } else if (isMobile) {
                button.classList.add('show');
            }
        }
        function handleSingleButtonDisplay() {
            var webchatButton = document.querySelector("#sui-webchat-btn");
            var chatButtons = Array.prototype.slice.call(document.querySelectorAll(".chat-button"));
            var allButtons = [webchatButton].concat(chatButtons);
            var widgetButton = document.querySelector("#sui-widget-btn");

            if (window.innerWidth <= 460 && allButtons.length === 1) {
                widgetButton.style.display = "none";
                allButtons[0].style.display = "block";
                allButtons[0].style.bottom = "20px";
            }
        }
        function handleResize() {
          var currentIsMobile = window.innerWidth <= 460;
          if (currentIsMobile !== isMobile) {
            isMobile = currentIsMobile;
            widgetButton.classList.remove('close');
            assignClickHandlers();
            calc(); 
          }
          handleSingleButtonDisplay();
        }
        window.addEventListener('resize', handleResize);
        var button = document.querySelector('#sui-webchat-btn');
        var iframe = document.querySelector('#sui-webchat');
        var callFormButton = document.querySelector('#sui-Voice-btn');

        var handleClick = function(event) {
          var isClosing = event.currentTarget.classList.contains("close");
          var isVisible = iframe && iframe.style.display === "block";
          if (iframe?.dataset.fromSurvey === "true" && isClosing && isVisible) {
            resetIframeToChat();
            delete iframe.dataset.fromSurvey;
            return;
          }
          if (isClosing && isVisible) {
            setTimeout(() => {
              tryRedirectToSurvey();
            }, 200);
            return;
          }

          if (iframe.src !== "https://chat.seasalt.ai/chat/9e4cef8823b94d019b954db6f4328a93") {
            iframe.src = "https://chat.seasalt.ai/chat/9e4cef8823b94d019b954db6f4328a93";
          }
          if (iframe.style.display !== 'block') {
            iframe.style.display = 'block';
            button.classList.add('close');
          } else {
            iframe.style.display = 'none';
            button.classList.remove('close');
          }
          showWebChat = !showWebChat;
          updateButtonClasses();
        };
        var widgetButton = document.querySelector('#sui-widget-btn');
        function assignClickHandlers() {
          if(callFormButton && callFormUrl){
            callFormButton.addEventListener('click', function() {
              window.location.href = callFormUrl;
            });
          }
          button.addEventListener('click', handleClick);

          widgetButton.addEventListener("click", function (event) {
            var isClosing = event.currentTarget.classList.contains("close");
            var isVisible = iframe && iframe.style.display === "block";

            if (iframe?.dataset.fromSurvey === "true" && isClosing && isVisible) {
              resetIframeToChat();
              delete iframe.dataset.fromSurvey;
              return;
            }

            if (isClosing && isVisible) {
              setTimeout(() => {
                tryRedirectToSurvey();
              }, 500);
              return;
            }

            if (iframe.src !== "https://chat.seasalt.ai/chat/9e4cef8823b94d019b954db6f4328a93") {
              iframe.src = "https://chat.seasalt.ai/chat/9e4cef8823b94d019b954db6f4328a93";
            }

            iframe.style.display = "block";
            widgetButton.classList.add("close");
            showWebChat = true;
            updateButtonClasses();
          });
        }
        assignClickHandlers();
        widgetButton.addEventListener('click', function() {
          isMobile = !isMobile;
          calc();
          widgetButton.classList.toggle('close', isMobile);
          updateButtonClasses();
        });

        document.querySelectorAll('button[id^="sui-"]').forEach(function(button, index) {
          var card = [{"id":"57cd3b97-f606-44ba-ba4f-9f8bdcfaddff","channel_type":"Line","channel_url":"https://lin.ee/fFNydh0a"},{"id":"2285fc57-0069-407c-b391-2ad3746f07b8","channel_type":"Instagram","channel_url":"https://www.instagram.com/seasalt.ai/"},{"id":"25946b1a-79a2-47ce-b08b-4c9d5154a15a","channel_type":"Messenger","channel_url":"https://mobile.facebook.com/profile.php?id=106953261045343"},{"id":"2e63b903-141e-4a47-acb7-0a191b18d725","channel_type":"WhatsApp","channel_url":"https://api.whatsapp.com/send/?phone=%2B14252987474&amp;text&amp;type=phone_number&amp;app_absent=0"},{"id":"f3040b06-34dc-47c5-bfb3-8cbf9c9022d3","channel_type":"Voice","channel_url":"<iframe src=\"https://docs.google.com/forms/d/e/1FAIpQLSe1Z3Yq1u4w-eMZvCYdLoexkFRiJNirN7Ksr6I_et15DJBobA/viewform?embedded=true\" width=\"600\" height=\"500\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading…</iframe>"}].find(function(c) {return button.id === 'sui-' + c.channel_type + '-btn'});
          if (card) {
            button.addEventListener('click', function() {
              if (card.channel_url.startsWith('<iframe')) {
                handleCallForm(card);
            } else {
              window.open(card.channel_url, '_blank');
            }
            });
          }
        });

        function handleCallForm(card) {
          var voiceButton = document.querySelector('#sui-Voice-btn');
          if (!voiceButton){
            return;
          }
          var iframeContainer = document.querySelector('#sui-call-form');
          if (!iframeContainer) {
            iframeContainer = document.createElement('div');
            iframeContainer.id = 'sui-call-form';
          }
          var srcMatch = card.channel_url.match(/<iframe.*?src="(.*?)"/);
          var src = srcMatch ? srcMatch[1] : null;
          if (src) {
            iframeContainer.innerHTML = card.channel_url;
            document.body.appendChild(iframeContainer);
            callFormUrl = src;
            var buttonBottom = getComputedStyle(voiceButton).bottom;
            iframeContainer.style.bottom = buttonBottom;
            iframeContainer.style.display =
            iframeContainer.style.display === 'block' ? 'none' : 'block';
          } else{
            window.open(card.channel_url, '_blank');
          }
        }
        
        const handleTooltipClose = () => {
          const tooltipElement = document.querySelector('#sui-widget-tooltip');
          tooltipElement.style.display = 'none';
        }
        const tooltipCloseButton = document.querySelector('#sui-widget-tooltip-close');
        tooltipCloseButton.addEventListener('click', handleTooltipClose);
        const handleAutoCloseTooltip = () => {
            const closeMilliseconds =
              Number(2) * 1000;
            setTimeout(() => {
              handleTooltipClose();
            }, closeMilliseconds);
          }      
          handleAutoCloseTooltip()
          
      }
      if (document.readyState !== 'loading') {
        initSeaChat();
      } else {
        document.addEventListener('DOMContentLoaded', function () {
          initSeaChat();
        });
      }
    </script>
    
  </body>
</html>